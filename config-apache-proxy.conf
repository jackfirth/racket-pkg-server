<VirtualHost *:443>
  ProxyRequests On
  ProxyPreserveHost On
  ProxyVia full
  <proxy>
   Order deny,allow
   Allow from all
  </proxy>

  DocumentRoot /var/lib/pkgserver/public_html/pkg-catalog-static
  <Directory /var/lib/pkgserver/public_html/pkg-catalog-static>
   Options +Indexes
   Require all granted
   DirectoryIndex index.html
  </Directory>

  # pkg-index
  ProxyPass /jsonp https://localhost:9004/jsonp
  ProxyPassReverse /jsonp https://localhost:9004/jsonp
  ProxyPass /api https://localhost:9004/api
  ProxyPassReverse /api https://localhost:9004/api

  # racket-pkg-website
  ProxyPass /catalog https://localhost:8443
  ProxyPassReverse /catalog https://localhost:8443

  SSLEngine on
  SSLProxyEngine on

  SSLProxyVerify none
  SSLProxyCheckPeerCN off
  SSLProxyCheckPeerName off
  SSLProxyCheckPeerExpire off

  SSLCertificateFile /var/lib/pkgserver/pkg-index/server-cert.pem
  SSLCertificateKeyFile /var/lib/pkgserver/pkg-index/private-key.pem
</VirtualHost>
